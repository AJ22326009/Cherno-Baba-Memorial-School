<div class="container mt-4">
    <div class="card card-primary card-outline">
        <div class="card-body box-profile">
            <div class="text-center">
                <img class="profile-user-img img-fluid img-circle" [src]="user.imageUrl" alt="User profile picture"
                    style="height: 100px">
            </div>
            <h3 class="profile-username text-center">{{user.name}}</h3>

            <ul class="list-group list-group-unbordered mb-3">
                <li class="list-group-item">
                    <b><i class="fas fa-id-badge"></i> ID</b> <a class="float-right">{{user.userId}}</a>
                </li>
                <li class="list-group-item">
                    <b><i class="fas fa-user-tag"></i> Role</b> <a class="float-right">{{user.role}}</a>
                </li>
                <li class="list-group-item">
                    <b><i class="fas fa-envelope"></i> Email</b> <a class="float-right">{{user.email}}</a>
                </li>
                @if(user.role === 'teacher'){
                <li class="list-group-item">
                    <b><i class="fas fa-chalkboard"></i> Assigned Class</b> <a class="float-right">{{user.assignedClass}}</a>
                </li>
                }
            </ul>
            <!--    to be used later-->
            @if(!changePasswordMode){
            <div class="flex row m-2" style="justify-content: center;">
                <a class="btn btn-primary m-2" (click)="changePasswordMode=true" style="font-weight: bold;"><i class="fas fa-key"></i> Change password</a>
            </div>
            }
            @if(changePasswordMode){
            <form [formGroup]="passwordForm" (ngSubmit)="updatePassword()">
                <div class="card-body">
                    <div class="form-group">
                        <input type="password" class="form-control" formControlName="currentPassword"
                            id="currentPassword" placeholder="Current Password">
                    </div>
                    @if(passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched){
                        <div class="text-danger mb-3">
                            Current Password is required.
                        </div>
                    }

                    <div class="form-group">
                        <input type="password" class="form-control" formControlName="newPassword" id="newPassword"
                            placeholder="New Password">
                    </div>
                    @if(passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched){
                        @if(passwordForm.get('newPassword')?.errors?.['required']){
                            <div class="text-danger mb-3">
                                New Password is required.
                            </div>
                        }
                         @if(passwordForm.get('newPassword')?.errors?.['minlength']){
                            <div class="text-danger mb-3">
                                New Password must be at least 6 characters long.
                            </div>
                        }
                    }

                    <div class="form-group">
                        <input type="password" class="form-control" formControlName="confirmNewPassword" id="confirmNewPassword"
                            placeholder="Confirm New Password">
                    </div>
                    @if(passwordForm.get('confirmNewPassword')?.invalid && passwordForm.get('confirmNewPassword')?.touched){
                        <div class="text-danger mb-3">
                            Confirm New Password is required.
                        </div>
                    }
                </div>
                 <div class="card-footer d-flex justify-content-center">
                     <button type="button" (click)="changePasswordMode=false"  class="btn btn-secondary mr-2">
                        <i class="fas fa-times"></i> Cancel
                </button>
                <button type="submit" class="btn btn-primary"[disabled]="passwordForm.invalid">
                    @if(loading){
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    }@else{
                        <i class="fas fa-save"></i> Update
                    }
                </button>
            </div>
            </form>
            @if(success!==''){
            <div class="alert alert-success" role="alert" style="position: fixed; bottom: 20px; right: 20px;">
                {{success}}
            </div>
            }

            @if(error!==''){
            <div class="alert alert-danger" role="alert" style="position: fixed; bottom: 20px; right: 20px;">
                {{error}}
            </div>
            }
            
        }
        </div>
        <!-- /.card-body -->
    </div>
</div>